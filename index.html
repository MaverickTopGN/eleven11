<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Marcadores — Pro TV</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700;800;900&family=Source+Sans+3:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#06110b; --bg2:#0a1a11; --txt:#eafff2; --muted:#a8c7b7;
  --line:rgba(255,255,255,.10); --live:#60a5fa; --good:#34d399; --ns:#a7f3d0;
  --shadow:0 18px 60px rgba(0,0,0,.45); --radius:18px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--txt);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:
    radial-gradient(900px 520px at 18% -10%, rgba(34,197,94,.20), transparent 60%),
    radial-gradient(900px 520px at 80% -10%, rgba(96,165,250,.12), transparent 60%),
    linear-gradient(180deg,var(--bg),var(--bg2));
}

/* ---------- layout ---------- */
.wrap{max-width:1100px;margin:0 auto;padding:22px 16px 60px}
header{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:14px;flex-wrap:wrap}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:44px;height:44px;border-radius:16px;background:linear-gradient(135deg,#22c55e,#60a5fa)}
.brandTitle .h{font-weight:900;font-size:16px}
.brandTitle .p{color:var(--muted);font-size:12px}

.controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.btn{cursor:pointer;border:1px solid var(--line);background:rgba(255,255,255,.04);color:var(--txt);border-radius:999px;padding:9px 12px;font-weight:800;font-size:13px}
.btn.primary{border-color:rgba(167,243,208,.35);background:rgba(167,243,208,.10)}
.select{appearance:none;padding-right:34px}

.legend{display:flex;gap:12px;color:var(--muted);font-size:12px;font-weight:700;width:100%;margin-top:10px}
.dot{width:9px;height:9px;border-radius:999px;display:inline-block;margin-right:6px}
.dot.past{background:#777}
.dot.current{background:#34d399}
.dot.future{background:#60a5fa}

.tabs{
  display:flex;gap:10px;overflow:auto;
  background:rgba(255,255,255,.03);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:10px;
}
.tab{
  padding:10px 12px;border-radius:999px;
  color:var(--muted);font-weight:900;font-size:13px;
  cursor:pointer;white-space:nowrap;border:1px solid transparent
}
.tab[aria-selected="true"]{
  color:var(--txt);
  background:rgba(255,255,255,.06);
  border-color:rgba(255,255,255,.12)
}

.grid{display:grid;grid-template-columns:1.25fr .75fr;gap:14px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}

.panel{
  background:rgba(255,255,255,.03);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:14px;
}

/* ---------- cards ---------- */
.match{
  display:grid;grid-template-columns:110px 1fr;
  gap:12px;align-items:center;
  padding:14px;border-radius:16px;
  background:linear-gradient(180deg,rgba(13,35,23,.9),rgba(11,28,19,.72));
  border:1px solid rgba(255,255,255,.07);
  cursor:pointer
}
.time{font-size:12px;color:var(--muted);font-weight:800}
.badge{padding:4px 8px;border-radius:999px;font-size:11px;font-weight:900}
.badge.ns{color:var(--ns)}
.badge.ft{color:var(--good)}
.badge.live{color:var(--live)}

.broadcast{
  display:grid;
  grid-template-columns:auto 70px auto;
  gap:10px;align-items:center;
}
.logoBig{
  width:48px;height:48px;border-radius:14px;
  background:rgba(255,255,255,.06);
  object-fit:contain
}
.scoreCenter{
  display:flex;align-items:center;justify-content:center;
  padding:6px 10px;border-radius:12px;
  background:rgba(255,255,255,.06);
  font-weight:900
}
.scoreCenter .vs{font-size:11px;color:var(--muted)}
.subline{
  font-size:10px;color:var(--muted);
  text-align:center;margin-top:4px;
}

/* ---------- resumen ---------- */
.kv{display:flex;justify-content:space-between;padding:10px 12px;border-radius:14px;background:rgba(13,35,23,.55)}
.k{color:var(--muted);font-size:12px;font-weight:800}
.v{font-weight:900;font-size:13px;display:flex;align-items:center;gap:8px}

/* ---------- modal ---------- */
.modalOverlay{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:flex-end;justify-content:center;z-index:999}
.modalOverlay.show{display:flex}
.modal{width:min(920px,100%);border-radius:22px;overflow:hidden;background:#060b09}
.modalTop{
  position:relative;padding:16px;
  --homeLogoUrl:none;--awayLogoUrl:none
}
.modalTop::before{
  content:"";position:absolute;inset:-60px;
  background:
    var(--homeLogoUrl) left 15% top 25% / 260px 260px no-repeat,
    var(--awayLogoUrl) right 15% top 25% / 260px 260px no-repeat;
  filter:blur(20px);opacity:.85
}
.modalTop>*{position:relative}

.pillMini{
  display:inline-flex;gap:8px;align-items:center;
  padding:8px 12px;border-radius:999px;
  background:rgba(255,255,255,.08);
  font-size:12px;font-weight:800
}
.modalScoreRow{
  display:grid;grid-template-columns:1fr auto 1fr;
  align-items:center;gap:12px;margin-top:12px
}
.modalTeam{display:flex;gap:10px;align-items:center}
.modalBigLogo{width:52px;height:52px;border-radius:16px;object-fit:contain}
.modalScore{font-size:36px;font-weight:900}
.modalTabs{display:flex;gap:10px;padding:12px;background:rgba(255,255,255,.04)}
.modalTab{
  padding:10px 14px;border-radius:999px;
  font-weight:900;font-size:13px;cursor:pointer;color:var(--muted)
}
.modalTab.active{color:var(--txt);background:rgba(255,255,255,.08)}
.modalBody{padding:14px;max-height:60vh;overflow:auto}
.statsTitle{font-weight:900;font-size:13px;margin-bottom:10px}

/* ---------- helpers ---------- */
.smallMuted{color:var(--muted);font-size:12px;font-weight:700}
</style>
</head>

<body>
<div class="wrap">

<header>
  <div class="brand">
    <div class="logo"></div>
    <div class="brandTitle">
      <div class="h">Marcadores — Pro TV</div>
      <div class="p">Jornadas + días + detalle tipo app</div>
    </div>
  </div>

  <div class="controls">
    <button class="btn" id="prevRound">⬅</button>
    <select class="btn select" id="roundSelect"></select>
    <button class="btn" id="nextRound">➡</button>
    <button class="btn primary" id="refreshBtn">↻ Actualizar</button>
  </div>

  <div class="legend">
    <span><span class="dot past"></span>Pasada</span>
    <span><span class="dot current"></span>Actual</span>
    <span><span class="dot future"></span>Futura</span>
  </div>
</header>

<nav class="tabs">
  <button class="tab" aria-selected="true" data-league="EPL">Premier</button>
  <button class="tab" data-league="LL">LaLiga</button>
  <button class="tab" data-league="L1">Ligue 1</button>
  <button class="tab" data-league="UCL">Champions</button>
  <button class="tab" data-league="LMX">Liga MX</button>
  <button class="tab" data-league="EFLC">EFL Cup</button>
  <button class="tab" data-league="CDR">Copa del Rey</button>
</nav>

<div class="grid">
  <section class="panel">
    <h2 id="leagueTitle">—</h2>
    <div id="matches"></div>
  </section>

  <aside class="panel">
    <h2>Resumen</h2>
    <div class="kv">
      <div class="k">Liga activa</div>
      <div class="v">
        <img id="activeLeagueLogo" width="18" height="18">
        <span id="activeLeague">—</span>
      </div>
    </div>
    <div class="kv"><div class="k">Partidos</div><div class="v" id="count">0</div></div>
  </aside>
</div>

</div>

<!-- MODAL -->
<div class="modalOverlay" id="modalOverlay">
  <div class="modal">
    <div class="modalTop" id="modalTop">
      <div class="pillMini" id="modalLeague"></div>
      <div class="modalScoreRow">
        <div class="modalTeam" id="modalHome"></div>
        <div class="modalScore" id="modalScore">—</div>
        <div class="modalTeam" id="modalAway"></div>
      </div>
    </div>
  </div>
</div>

<script>
/* ========= LIGAS CON LOGOS ========= */
const LEAGUES = {
  EPL:  { name:"Premier League", id:39,  logo:"https://media.api-sports.io/football/leagues/39.png" },
  LL:   { name:"LaLiga", id:140, logo:"https://media.api-sports.io/football/leagues/140.png" },
  L1:   { name:"Ligue 1", id:61,  logo:"https://media.api-sports.io/football/leagues/61.png" },
  UCL:  { name:"Champions League", id:2,   logo:"https://media.api-sports.io/football/leagues/2.png" },
  LMX:  { name:"Liga MX", id:262, logo:"https://media.api-sports.io/football/leagues/262.png" },
  EFLC: { name:"EFL Cup", id:48,  logo:"https://media.api-sports.io/football/leagues/48.png" },
  CDR:  { name:"Copa del Rey", id:143, logo:"https://media.api-sports.io/football/leagues/143.png" },
};

let active="EPL";

/* ========= API ========= */
async function api(endpoint, params){
  const u=new URL("/.netlify/functions/football", location.origin);
  u.searchParams.set("endpoint", endpoint);
  Object.entries(params||{}).forEach(([k,v])=>u.searchParams.set(k,v));
  const r=await fetch(u); return r.json();
}

/* ========= UI ========= */
const elMatches=document.getElementById("matches");
const elLeague=document.getElementById("activeLeague");
const elLogo=document.getElementById("activeLeagueLogo");
const elTitle=document.getElementById("leagueTitle");

function renderLeague(){
  const L=LEAGUES[active];
  elLeague.textContent=L.name;
  elLogo.src=L.logo;
  elTitle.textContent=L.name;
}

document.querySelectorAll(".tab").forEach(tab=>{
  tab.onclick=()=>{
    document.querySelectorAll(".tab").forEach(t=>t.setAttribute("aria-selected","false"));
    tab.setAttribute("aria-selected","true");
    active=tab.dataset.league;
    renderLeague();
  };
});

renderLeague();
</script>
</body>
</html>
